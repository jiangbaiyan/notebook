baiyan

全部视频：https://segmentfault.com/a/1190000018488313

## 类的存储
 - 谈到PHP中的类，我们知道它是对象的抽象，也相当于对象的模板，它是编译阶段的产物。一个类被抽象出来，它本身有自己的属性，还有自己的方法。如果让我们自己去用C语言实现一个类的存储结构，我们如何设计？
 - 类的几大要素：类常量、普通属性、静态属性、动态属性、方法
 - 下面我们逐个来看究竟它们是被如何存储的
### 类常量的存储
 - 举一个类常量的例子：
```php
class A{
	const PI = 3.14;
}
```
  - 这里的PI就是一个类常量。常量名为PI，常量值为3.14。我们可以用两种方式来访问它：
  - 类外：A::PI
  - 类内：self::PI
  - 那么我们看一下常量的存储结构：
```c
struct _zend_class_entry {

	...
	HashTable constants_table;
	...
	
};
```
 - 在PHP7中，类是以一个zend_class_entry结构体来存储的。其中这个constants_table字段，就是用来存储类常量的。它是一个hashtable，key为常量名，value为常量值，这里还是很好理解的。
### 普通属性的存储
 - 举一个普通属性的例子：
```php
class A{
	public $name = 'jby';
}
```
 - 这里name就是属性名，值就是jby，下面看下普通属性是如何存储的：
```c
struct _zend_class_entry {

	...
	int default_properties_count; //普通属性的数量
	...
	zval *default_properties_table; //普通属性的值
	...
	HashTable properties_info; //存储普通属性的信息
	... 
	
```
